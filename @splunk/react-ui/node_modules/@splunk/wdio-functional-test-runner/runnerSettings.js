'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.default = handleOptionsAndSettings;

var _commander = require('commander');

var _commander2 = _interopRequireDefault(_commander);

var _intel = require('intel');

var _intel2 = _interopRequireDefault(_intel);

var _path = require('path');

var _path2 = _interopRequireDefault(_path);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var handleOptions = function handleOptions() {
    // Must not clash with wdio options
    _commander2.default.option('--filter <filters>', 'Filter specs', function (v) {
        return v.split(',');
    }).option('--runnerVerbose', 'Enable detailed Runner logging').option('--coverage', 'Enable coverage report output').option('--coverage-maps', 'Enable coverage maps output').parse(process.argv);

    if (_commander2.default.runnerVerbose) {
        _intel2.default.setLevel(_intel2.default.VERBOSE);
    }
};

var handleSettings = function handleSettings(settings) {
    settings.sourcePath = _path2.default.resolve(settings.source);
    settings.outputPath = _path2.default.resolve(settings.temp || 'functional-temp');
};

function handleOptionsAndSettings(settings) {
    handleOptions();
    handleSettings(settings);

    settings.filter = _commander2.default.filter;
    settings.coverage = _commander2.default.coverage;
    settings.coverageMaps = _commander2.default.coverageMaps;
}